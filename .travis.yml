sudo: required
dist: trusty
git:
        submodules: false
language: c
compiler: gcc
before_install:
        - sudo apt-get -qq update
        - sudo apt-get install -y curl qemu-system-x86 nasm texinfo libmpfr-dev libmpc-dev libgmp-dev libisl-dev flex bison packaging-dev
        - git submodule update --init lwip usr/libomp
script:
        - cd $TOPDIR
        - wget https://bintray.com/rwth-os/hermitcore/download_file?file_path=binutils-hermit_2.26.1-1_amd64.deb -O binutils-hermit_2.26.1-1_amd64.deb
        - sudo dpkg -i ./binutils-hermit_2.26.1-1_amd64.deb
        - wget https://bintray.com/rwth-os/hermitcore/download_file?file_path=newlib-hermit_2.4.0-1_amd64.deb -O newlib-hermit_2.4.0-1_amd64.deb
        - sudo dpkg -i ./newlib-hermit_2.4.0-1_amd64.deb
        - wget https://bintray.com/rwth-os/hermitcore/download_file?file_path=pthread-embedded-hermit_1.0-1_amd64.deb -O pthread-embedded-hermit_1.0-1_amd64.deb
        - sudo dpkg -i ./pthread-embedded-hermit_1.0-1_amd64.deb
        - wget https://www.lankes.org/deploy/bootstrap.tar.gz
        - tar xzf bootstrap.tar.gz
        - mkdir -p $TOPDIR/tmp/bootstrap
        - cd -
        - ./configure
        - make -j2 T=1 all
env:
        global:
                - TOPDIR=/home/travis/build
                - PATH=$PATH:/opt/hermit/bin:$TOPDIR/x86/bin
                - PROXY_STR=":hermit:M:7:\\x42::`pwd`/RWTH-OS/HermitCore/tools/proxy"
                - HERMIT_ISLE=qemu
                - HERMIT_CPUS=1
                - HERMIT_MEM="512M"
                - HERMIT_KVM="0"
                - HERMIT_VERBOSE="1"
